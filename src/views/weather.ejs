<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="styles/output.css" />
    <title>Weather</title>
  </head>
  <body class="bg-gradient-to-b from-blue-50 to-slate-700 md:h-screen">
    <div class="container mx-auto p-4">
      <a class="font-extrabold text-3xl text-slate-600" href="/"><</a>
    </div>

    <!-- form -->
    <!-- <div class="flex justify-center mb-12">
      <div class="w-1-3">
        <h2 class="font-medium text-slate-600 mb-1">Find your City</h2>
        <form class="flex space-x-2" action="/get-geocode" method="POST">
          <input
            class="py-1 px-4 shadow-xl focus:outline-none rounded-lg focus:ring focus:ring-slate-300"
            type="text"
            name="cityName"
            placeholder="City name"
          />
          <input
            class="font-medium rounded-lg ring border-l-none ring-slate-300 text-slate-600 self-center py-1 px-2 hover:-translate-y-1 hover:shadow-xl"
            type="submit"
            value="SEARCH"
          />
        </form>
      </div>
    </div> -->

    <!-- Weather display part -->

    <h2 class="text-center text-3xl font-semibold text-slate-600 mb-6">
      Today
    </h2>
    <!-- weather component -->
    <div class="flex justify-center">
      <div class="bg-white p-12 rounded-lg pb-12 mb-12 md:mb-24">
        <h2 class="text-3xl text-center uppercase font-semibold">
          <%= data.name %>, <%= data.sys.country %>
        </h2>
        <div class="flex justify-center">
          <img
            src="https://openweathermap.org/img/wn/<%=data.weather[0].icon  %>.png"
            alt="Image that describes the weather for the day"
          />
        </div>
        <p class="text-center uppercase"><%= data.weather[0].main %></p>
        <p class="text-center uppercase mb-4">
          <%= data.weather[0].description %>
        </p>
        <p class="text-center text-5xl font-semibold mb-2">
          <%= Math.floor( data.main.temp - 273.15) %> °C
        </p>

        <div class="flex space-x-5 text-sm justify-center mb-6">
          <p>
            Min:
            <span class="font-semibold"
              ><%= Math.floor( data.main.temp_min - 273.15) %> °C</span
            >
          </p>
          <p>|</p>
          <p>
            Max:
            <span class="font-semibold"
              ><%= Math.floor( data.main.temp_max - 273.15) %> °C</span
            >
          </p>
        </div>
        <p class="text-center">
          Humidity:
          <span class="font-semibold"><%= data.main.humidity %>%</span>
        </p>
        <p class="text-center">
          Wind: <span class="font-semibold"><%= data.wind.speed %>m/s</span>
        </p>
        <p class="text-center mb-4">
          Pressure:
          <span class="font-semibold"><%= data.main.pressure %>hPa</span>
        </p>

        <div class="flex space-x-4">
          <p>
            Sunrise: <%= new Date(data.sys.sunrise * 1000).toLocaleString([],{
            hour: 'numeric', minute: '2-digit' }) %>
          </p>
          <p>
            Sunset: <%= new Date(data.sys.sunset * 1000).toLocaleString([],{
            hour: 'numeric', minute: '2-digit' }) %>
          </p>
        </div>
      </div>
    </div>

    <!-- forecast -->
    <% if(locals.forecast){ %>
    <h2 class="text-center text-3xl mb-6 font-semibold text-slate-100">
      5 Days
    </h2>
    <div class=""></div>

    <div
      class="flex flex-col space-y-4 items-center items-stretch justify-center px-12 pb-12 md:flex-row md:space-y-0 md:space-x-4"
    >
      <% forecast.slice(-5).forEach(element => { %>

      <div class="bg-white p-8 rounded-lg w-full md:w-1/5">
        <p class="text-left text-gray-500">
          <%= element.dt_txt.split(" ")[0].split("-")[2] %>- <%=
          element.dt_txt.split(" ")[0].split("-")[1] %>
        </p>
        <div class="flex justify-center">
          <img
            src="https://openweathermap.org/img/wn/<%=element.weather[0].icon  %>.png"
            alt="Image that describes the weather for the day"
          />
        </div>
        <p class="text-center text-3xl font-semibold mb-2">
          <%= Math.floor( element.main.temp - 273.15) %> °C
        </p>
        <p class="text-center uppercase text-sm">
          <%= element.weather[0].main %>
        </p>
        <p class="text-center uppercase text-sm">
          <%= element.weather[0].description %>
        </p>
      </div>

      <% }); %>
    </div>

    <% } %>
    <footer>
      <div class="flex flex-col items-center text-slate-300">
        <p class="">Copyright &copy; 2024, Antonio Blašković</p>
        <p class="text-sm pb-4">Designed with OpenWeather API</p>
      </div>
    </footer>
  </body>
</html>
